# S3 (Simple Storage Service)

## Overview

**Object storage** - Store and retrieve any amount of data  
**Durability**: 99.999999999% (11 9's)  
**Availability**: 99.95% - 99.99% depending on storage class  
**Globally unique bucket names**

## Storage Classes

- **Standard**: General purpose, frequently accessed
- **Standard-IA**: Infrequent access, lower cost
- **One Zone-IA**: Single AZ, lower cost than Standard-IA
- **Glacier Instant**: Archive with millisecond retrieval
- **Glacier Flexible**: Archive with minutes to hours retrieval
- **Glacier Deep Archive**: Archive with 12 hours retrieval
- **Intelligent-Tiering**: Automatically moves data between tiers

## Encryption

| Type        | Key Management        | Use Case                   |
| ----------- | --------------------- | -------------------------- |
| **SSE-S3**  | AWS managed (AES-256) | Default encryption         |
| **SSE-KMS** | AWS KMS               | Audit trails, key rotation |
| **SSE-C**   | Customer provided     | Full key control           |
| **CSE**     | Client-side           | Encrypt before upload      |

**SSE-S3 (Server-Side Encryption)**
: AWS manages keys automatically  
: Default encryption option

**SSE-KMS (Key Management Service)**  
: AWS managed or customer managed keys  
: Provides audit trails and key rotation

**SSE-C (Customer-Provided Keys)**  
: You provide keys with each request  
: AWS doesn't store keys

**CSE (Client-Side Encryption)**  
: Encrypt data before uploading  
: Full responsibility for key management

## Replication

**Same Region Replication (SRR)**: Within same region  
**Cross-Region Replication (CRR)**: Across different regions  
**Requirements**: Versioning enabled on both buckets  
**Note**: Lifecycle policies not replicated

## Versioning

- Multiple versions of same object
- Protects against accidental deletion
- Each version has unique version ID
- Can suspend but not disable once enabled

## Lifecycle Management

- Transition objects between storage classes
- Delete objects after specified time
- Apply to specific prefixes or tags
- Cost optimization tool

## Access Control

- **Bucket Policies**: JSON-based bucket-level access
- **ACLs**: Object and bucket level access (legacy)
- **IAM Policies**: User/role-based access
- **Pre-signed URLs**: Temporary access to objects

## Access Point
- An S3 Object Lambda Access Point is a new type of S3 Access Point that allows you to process data retrieved from S3 before returning it to an application.
Eg: 
- We can store user details with PII in S3, then use S3 Object Lambda to redact PII when accessed by applications without permission to view it.

## Personal pain points
- **s3:ListBucket** -> list objects in a bucket, not list buckets in the account
- **s3:ListAllMyBuckets** -> list all buckets in the account